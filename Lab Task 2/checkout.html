<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Checkout - jQuery Validation</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <style>
    body { background-color: #f8f9fa; font-family: Arial, sans-serif; }
    .progress-steps {
      display: flex; justify-content: space-between; margin-bottom: 2rem; text-align: center;
    }
    .step { flex: 1; padding: 0.6rem; border: 1px solid #dee2e6; border-radius: 5px; background: #fff; margin: 0 0.3rem; color: #6c757d; }
    .active { background-color: #0d6efd; color: #fff; font-weight: 600; }
    @media (min-width: 992px) {
      .order-summary { position: sticky; top: 1rem; }
    }
    .place-order {
      background: #0d6efd; border: none; color: #fff; padding: 0.75rem 1rem; width: 100%;
      border-radius: 5px; font-size: 1rem; cursor: pointer; transition: 0.3s;
    }
    .place-order:hover { background: #0b5ed7; }
    #card-details.hidden { display: none; }
    #order-success { display: none; margin-top: 3rem; text-align: center; }
    .success-icon { font-size: 3rem; color: #198754; }
  </style>
</head>
<body>

<div class="container py-4">
  <!-- Progress Header -->
  <div class="progress-steps">
    <div class="step">Cart</div>
    <div class="step">Address</div>
    <div class="step active">Payment / Checkout</div>
    <div class="step">Review</div>
  </div>

  <form id="checkoutForm" novalidate>
    <div class="row g-4">
      <!-- LEFT column -->
      <div class="col-12 col-md-7">

        <!-- Customer & Shipping -->
        <div class="card mb-4">
          <div class="card-body">
            <h5>Customer & Shipping Information</h5>
            <div class="row g-3 mt-2">
              <div class="col-12">
                <div class="form-floating">
                  <input type="text" id="fullname" class="form-control" placeholder="Full Name">
                  <label for="fullname">Full Name</label>
                  <div class="invalid-feedback">Full name must be at least 3 characters.</div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-floating">
                  <input type="email" id="email" class="form-control" placeholder="Email">
                  <label for="email">Email</label>
                  <div class="invalid-feedback">Please enter a valid email.</div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-floating">
                  <input type="tel" id="phone" class="form-control" placeholder="Phone">
                  <label for="phone">Phone</label>
                  <div class="invalid-feedback">Phone must be digits only (min 10).</div>
                </div>
              </div>

              <div class="col-12">
                <div class="form-floating">
                  <input type="text" id="address" class="form-control" placeholder="Address">
                  <label for="address">Address</label>
                  <div class="invalid-feedback">Address is required.</div>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-floating">
                  <input type="text" id="city" class="form-control" placeholder="City">
                  <label for="city">City</label>
                  <div class="invalid-feedback">City is required.</div>
                </div>
              </div>

              <div class="col-md-3">
                <div class="form-floating">
                  <input type="text" id="postal" class="form-control" placeholder="Postal Code">
                  <label for="postal">Postal Code</label>
                  <div class="invalid-feedback">Postal code 4–6 digits required.</div>
                </div>
              </div>

              <div class="col-md-3">
                <div class="form-floating">
                  <select id="country" class="form-select">
                    <option value="">Select</option>
                    <option>Pakistan</option>
                    <option>India</option>
                    <option>United States</option>
                    <option>United Kingdom</option>
                  </select>
                  <label for="country">Country</label>
                  <div class="invalid-feedback">Please select a country.</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Payment -->
        <div class="card mb-4">
          <div class="card-body">
            <h5>Payment Method</h5>
            <div class="form-check mb-2">
              <input type="radio" name="payment" id="card" value="card" class="form-check-input">
              <label class="form-check-label" for="card">Card</label>
            </div>
            <div class="form-check mb-2">
              <input type="radio" name="payment" id="cod" value="cod" class="form-check-input">
              <label class="form-check-label" for="cod">Cash on Delivery (COD)</label>
            </div>
            <div class="form-check mb-3">
              <input type="radio" name="payment" id="wallet" value="wallet" class="form-check-input">
              <label class="form-check-label" for="wallet">Wallet</label>
            </div>

            <!-- Card details -->
            <div id="card-details" class="hidden">
              <div class="row g-3">
                <div class="col-12">
                  <div class="form-floating">
                    <input type="text" id="cardholder" class="form-control" placeholder="Cardholder Name">
                    <label for="cardholder">Cardholder Name</label>
                    <div class="invalid-feedback">Cardholder name required.</div>
                  </div>
                </div>
                <div class="col-12">
                  <div class="form-floating">
                    <input type="text" id="cardnum" class="form-control" placeholder="1234 5678 9012 3456">
                    <label for="cardnum">Card Number</label>
                    <div class="invalid-feedback">Card number required.</div>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-floating">
                    <input type="text" id="expiry" class="form-control" placeholder="MM/YY">
                    <label for="expiry">Expiry (MM/YY)</label>
                    <div class="invalid-feedback">Expiry required.</div>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-floating">
                    <input type="text" id="cvv" class="form-control" placeholder="CVV">
                    <label for="cvv">CVV</label>
                    <div class="invalid-feedback">CVV required.</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Terms -->
        <div class="card">
          <div class="card-body">
            <div class="form-check mb-3">
              <input type="checkbox" id="terms" class="form-check-input">
              <label for="terms" class="form-check-label">I agree to the <a href="#">terms & conditions</a>.</label>
              <div class="invalid-feedback">You must agree before placing the order.</div>
            </div>
            <button type="submit" class="place-order">Place Order</button>
          </div>
        </div>
      </div>

      <!-- RIGHT column -->
      <div class="col-12 col-md-5">
        <div class="card order-summary">
          <div class="card-body">
            <h5>Order Summary</h5>
            <ul class="list-group mb-3">
              <li class="list-group-item d-flex justify-content-between">
                Product 1 <span>PKR 2500</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                Product 2 <span>PKR 3000</span>
              </li>
            </ul>
            <div class="input-group mb-3">
              <input type="text" class="form-control" placeholder="Coupon Code">
              <button class="btn btn-outline-secondary" type="button">Apply</button>
            </div>
            <div class="d-flex justify-content-between mb-1"><span>Subtotal:</span><span>PKR 5500</span></div>
            <div class="d-flex justify-content-between mb-1"><span>Shipping:</span><span>PKR 200</span></div>
            <div class="d-flex justify-content-between mb-1"><span>Tax:</span><span>PKR 100</span></div>
            <hr>
            <div class="d-flex justify-content-between"><strong>Total:</strong><strong>PKR 5800</strong></div>
          </div>
        </div>
      </div>
    </div>
  </form>

  <!-- Success Message -->
  <div id="order-success" class="card">
    <div class="card-body">
      <div class="success-icon mb-3">✔️</div>
      <h3>Order Placed Successfully!</h3>
      <p>Thank you for your purchase. You’ll receive a confirmation email soon.</p>
    </div>
  </div>
</div>

<!-- ✅ jQuery Validation Script -->
<script>
$(document).ready(function() {

  // Show/hide card details
  $("input[name='payment']").change(function() {
    if ($("#card").is(":checked")) $("#card-details").removeClass("hidden");
    else $("#card-details").addClass("hidden");
  });

  // Validate on submit
  $("#checkoutForm").on("submit", function(e) {
    e.preventDefault();
    let valid = true;
    $(".form-control, .form-select, .form-check-input").removeClass("is-invalid is-valid");

    // Helper to mark invalid
    const markInvalid = (id) => { $("#" + id).addClass("is-invalid"); valid = false; };
    const markValid = (id) => { $("#" + id).addClass("is-valid"); };

    // Validation rules
    const name = $("#fullname").val().trim();
    if (name.length < 3) markInvalid("fullname"); else markValid("fullname");

    const email = $("#email").val().trim();
    const emailRegex = /^[^@\s]+@[^@\s]+\.[^@\s]+$/;
    if (!emailRegex.test(email)) markInvalid("email"); else markValid("email");

    const phone = $("#phone").val().trim();
    if (!/^\d{10,}$/.test(phone)) markInvalid("phone"); else markValid("phone");

    const address = $("#address").val().trim();
    if (address === "") markInvalid("address"); else markValid("address");

    const city = $("#city").val().trim();
    if (city === "") markInvalid("city"); else markValid("city");

    const postal = $("#postal").val().trim();
    if (!/^\d{4,6}$/.test(postal)) markInvalid("postal"); else markValid("postal");

    const country = $("#country").val();
    if (country === "") markInvalid("country"); else markValid("country");

    const payment = $("input[name='payment']:checked").val();
    if (!payment) { $("input[name='payment']").addClass("is-invalid"); valid = false; }
    else $("input[name='payment']").removeClass("is-invalid");

    if (payment === "card") {
      const cardholder = $("#cardholder").val().trim();
      const cardnum = $("#cardnum").val().trim();
      const expiry = $("#expiry").val().trim();
      const cvv = $("#cvv").val().trim();
      if (cardholder === "") markInvalid("cardholder"); else markValid("cardholder");
      if (cardnum === "") markInvalid("cardnum"); else markValid("cardnum");
      if (expiry === "") markInvalid("expiry"); else markValid("expiry");
      if (cvv === "") markInvalid("cvv"); else markValid("cvv");
    }

    if (!$("#terms").is(":checked")) markInvalid("terms"); else markValid("terms");

    // Scroll to first error
    if (!valid) {
      $('html, body').animate({
        scrollTop: $(".is-invalid:first").offset().top - 100
      }, 500);
      return;
    }

    // Show success
    $("#order-success").fadeIn();
    $('html, body').animate({
      scrollTop: $("#order-success").offset().top
    }, 600);
  });

  // Real-time correction
  $(".form-control, .form-select, .form-check-input").on("input change", function() {
    if ($(this).hasClass("is-invalid")) $(this).removeClass("is-invalid");
  });
});
</script>

</body>
</html>
